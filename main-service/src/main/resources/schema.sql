CREATE TABLE IF NOT EXISTS users (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY,
  name VARCHAR(255),
  email VARCHAR(512),
  CONSTRAINT PK_USER PRIMARY KEY (id),
  CONSTRAINT UQ_USER_EMAIL UNIQUE (email)
);

CREATE TABLE IF NOT EXISTS categories (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY,
  name VARCHAR(255),
  CONSTRAINT PK_CATEGORY PRIMARY KEY (id),
  CONSTRAINT UQ_CATEGORY_NAME UNIQUE (name)
);

CREATE TABLE IF NOT EXISTS locations (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY,
  latitude FLOAT,
  longitude FLOAT,
  CONSTRAINT PK_LOCATION PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS events (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY,
  annotation VARCHAR(255),
  paid BOOL,
  description VARCHAR(512),
  event_date TIMESTAMP WITHOUT TIME ZONE,
  location_id BIGINT REFERENCES locations(id),
  category_id BIGINT REFERENCES categories(id),
  participant_limit INTEGER,
  request_moderation BOOL,
  title VARCHAR(512),
  initiator_id BIGINT REFERENCES users(id),
  creation_date TIMESTAMP WITHOUT TIME ZONE,
  published_date TIMESTAMP WITHOUT TIME ZONE,
  state VARCHAR(50),
  CONSTRAINT PK_EVENT PRIMARY KEY (id)
);

DELETE FROM users;
ALTER TABLE users ALTER COLUMN id RESTART WITH 1;

DELETE FROM categories;
ALTER TABLE categories ALTER COLUMN id RESTART WITH 1;

DELETE FROM locations;
ALTER TABLE locations ALTER COLUMN id RESTART WITH 1;

DELETE FROM events;
ALTER TABLE events ALTER COLUMN id RESTART WITH 1;